# Project-Automation
Автоматизация подготовки к недельным проектам c рассылкой в Telegram.

### Ограничения проекта

Скрипт по данному проекту выполняет mvp, поэтому содержит ряд ограничений:

- Периоды работы ПМ в файле json должны быть указаны строкой строго в формате "ЧЧ:ММ - ЧЧ:ММ".
- Периоды работы ПМ не пересекаются и не могут быть равны друг другу.
- Периоды работы ПМ строго кратны 30 минутам  и начинаются в 00 минут или 30 минут. Например, "08:00 - 12:00" или "08:30 - 12:30",
но не как не "08:15 - 11:50".
- Команды формируются строго из 3 (трех) студентов одного уровня, подавших заявку на один и тот же период. 
- Студент при подаче заявки может указать только один период, выбор конкретного времени или более узкого периода не предусматривается.
- Отказ студента от участия после регистрации или изменение времени не обрабатывается скриптом.


## Как запустить

- Для изоляции проекта рекомендуется развернуть виртуальное окружение
  
```
python3 -m venv env
source env/bin/activate
```

- Скачайте репозиторий с гитхаб
- Python3 должен быть уже установлен. Затем используйте pip для установки зависимостей

```
pip install -r requirements.txt
```

- Создайте бд командой 

```
python manage.py migrate
``` 

- Создайте суперпользователя командой 
  
```
python manage.py createsuperuser
```

- Заполните БД данными из json файлов (файлы `dataPms.json` и `dataStudents.json` расположите в корневой папке) с помощью команды
  
```
python manage.py filling_db
```

Файл `dataPms.json` содержит данные PM-ов, должен быть заполнен по типу

```json
[
    {
        "ProjectManager":"Полное имя",
        "Nickname":"Телеграм никнейм",
        "Periods":"08:00 - 10:00"
    },
]
```

Файл `dataStudents.json` содержит данные студентов,  должен быть заполнен по типу:

```json
[
    {
        "Student": "ПОЛНОЕ ИМЯ",
        "Level": "beginner",
        "Nickname": "@kharris",
    },
]
```
- С помощью инструментов хостинга запустите Админ-панель
- Создайте в корне проекта файл `.env` для запуска телеграм бота

```
TG_BOT_TOKEN=ТЕЛЕГРАМ_ТОКЕН
ADMINS=ТЕЛЕГРАМ_НИКНЕЙМ_АДМИНА
ADMIN_NAME=ПОЛНОЕ ИМЯ
```

- запустите бота командой `python manage.py bot`


## Работа с админ-панелью

Перейдите на страницу админки, введите Логин и Пароль суперпользователя, созданного при развертывании проекта. 

Админ-панель позволяет:
- Вручную добавить в БД: ПМ, студентов
- Посмотреть даннные ПМ-ов и студентов 

Админ-панель содержит ряд ограничений:
- Нет возможности сформировать рассписание
- Нет возможности посмотреть сформированное рассписание
- Нет возможности добавить администратора бота


### Цели проекта

Код написан в учебных целях — это командный проект в рамках курса Python на сайте [Devman](https://dvmn.org).
