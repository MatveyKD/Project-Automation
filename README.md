# Project-Automation
Автоматизация подготовки к недельным проектам c рассылкой в Telegram.


### Краткое описание проекта
Данный скрипт позволяет с помощью Телеграм-бота значительно сократить время на рутинные операции, связанные с подготовкой к недельным проектам Devman.
Телеграм бот регистрирует заявки от студентов на желательные периоды для созвонов. Список возможных периодов формируется из загруженых данных по Проджект-Менедежерам (далее ПМ). Затем с помощью бота Админ запускает распределение студентов по группам. Далее через бот Админ может посмотреть в виде файла xls список и состав команд, список нераспределенных студентов, список итоговых данных по всем студентам. Также с помощью бота Админ делает рассылку всем студентам итогового времени для созвона и данных по командному проекту. Функции просмотра расписания и рассылки доступны также ПМ. Кроме того, студент может самостоятельно через бот уточнить информацию по своему командному проекту.



### Как запустить

- Для изоляции проекта рекомендуется развернуть виртуальное окружение
  
```
python3 -m venv env
source env/bin/activate
```

- Скачайте репозиторий с гитхаб
- Python3 должен быть уже установлен. Затем используйте pip для установки зависимостей

```
pip install -r requirements.txt
```

- Создайте бд командой 

```
python manage.py migrate
``` 

- Создайте суперпользователя командой 
  
```
python manage.py createsuperuser
```

- Заполните БД данными из json файлов (файлы `dataPms.json` и `dataStudents.json` расположите в корневой папке) с помощью команды
  
```
python manage.py filling_db
```

Файл `dataPms.json` содержит данные PM-ов, должен быть заполнен по типу

```json
[
    {
        "ProjectManager":"Полное имя",
        "Nickname":"Телеграм никнейм",
        "Periods":"08:00 - 10:00"
    },
]
```

Файл `dataStudents.json` содержит данные студентов,  должен быть заполнен по типу:

```json
[
    {
        "Student": "ПОЛНОЕ ИМЯ",
        "Level": "beginner",
        "Nickname": "@kharris",
    },
]
```
- С помощью инструментов хостинга запустите Админ-панель
- Создайте в корне проекта файл `.env` для запуска телеграм бота

```
TG_BOT_TOKEN=ТЕЛЕГРАМ_ТОКЕН
ADMINS=ТЕЛЕГРАМ_НИКНЕЙМ_АДМИНА
ADMIN_NAME=ПОЛНОЕ ИМЯ
```

- запустите бота командой `python manage.py bot`



### Работа с админ-панелью

Перейдите на страницу админки, введите Логин и Пароль суперпользователя, созданного при развертывании проекта. 

Админ-панель позволяет:
- Вручную добавить в БД: ПМ, студентов
- Посмотреть даннные ПМ-ов и студентов 

Админ-панель содержит ряд ограничений:
- Нет возможности сформировать расписание
- Нет возможности добавить администратора бота


### Ограничения проекта

Скрипт по данному проекту выполняет mvp, поэтому содержит ряд ограничений:

- Бот содержит ряд кнопок, предназначенных для будущего функционала. Они отмечены как <т. р.> ("точки роста").
- Периоды работы ПМ в файле json должны быть указаны строкой строго в формате строки "ЧЧ:ММ - ЧЧ:ММ".
- Периоды работы ПМ не пересекаются и не могут быть равны друг другу.
- Периоды работы ПМ строго кратны 30 минутам  и начинаются в 00 минут или 30 минут. Например, "08:00 - 12:00" или "08:30 - 12:30",
но не как не "08:15 - 11:50".
- Команды формируются строго из 3 (трех) студентов одного уровня, подавших заявку на один и тот же период. 
- Студент при подаче заявки может указать только один период, выбор конкретного времени или более узкого периода не предусматривается.
- После создания расписания студент не может изменить период.
- Отказ студента от участия после регистрации не обрабатывается скриптом (это <т. р.>).


## Цели проекта

Код написан в учебных целях — это командный проект в рамках курса Python на сайте [Devman](https://dvmn.org).